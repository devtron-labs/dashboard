import React, { useState } from 'react'
import Tippy from '@tippyjs/react'
import { ReactComponent as Question } from '../../../../assets/icons/ic-help-outline.svg'
import { ReactComponent as Bug } from '../../../../assets/icons/ic-nav-bug.svg'
import { ReactComponent as Secure } from '../../../../assets/icons/ic-secure.svg'

export const SecurityVulnerabilityCard = () => {
    // @TODO: This state might be passed from props later
    const [isSecure, setIsSecure] = useState<boolean>(true)
    return (
        <div data-testid="security-vulnerability-card" className="app-details-info-card flex left bcn-0 br-8 mr-12">
            <div className="app-details-info-card__top-container flex">
                <div className="app-details-info-card__top-container__content">
                    <div className="app-details-info-card__top-container__content__title-wrapper">
                        <div className="fs-12 fw-4 cn-7 mr-5">Security</div>
                        <Tippy
                            className="default-tt"
                            arrow={false}
                            placement="top"
                            content="Status of last triggered deployment" // @TODO: update this copy
                        >
                            <Question className="icon-dim-16 mt-2" />
                        </Tippy>
                    </div>
                    <div className="app-details-info-card__top-container__content__commit-text-wrapper flex fs-12 fw-4">
                        {isSecure ? (
                            <div className="dc__info-title lh-20 ">You're secure!</div>
                        ) : (
                            <div className="fs-13 fw-6 lh-20 f-waiting">101 Vulnerabilities</div>
                        )}
                    </div>
                </div>
                {isSecure ? <Secure /> : <Bug className="form__icon--waiting" />}
            </div>
            <div className="app-details-info-card__bottom-container flex">
                {/* @TODO: Get these error titles from api response */}
                <span className="app-details-info-card__bottom-container__message mr-2 fs-12 fw-4">
                    {isSecure ? 'No Vulnerabilities found' : '13 Critical, 15 Moderate, 73 Low'}
                </span>
                <div className="app-details-info-card__bottom-container__details fs-12 fw-6">Details</div>
            </div>
        </div>
    )
}

export default SecurityVulnerabilityCard
